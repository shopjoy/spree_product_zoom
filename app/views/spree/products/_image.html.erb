<% if defined?(image) && image %> 
  <%= link_to image_tag(image.attachment.url(:product), :itemprop => "image"), image.attachment.url(:original), :class => 'fancybox' %>
<% else %>
  <% images = (@product.images if !@product.images.empty?) || (@product.variant_images if !@product.is_a?(Spree::Variant) && !@product.variant_images.empty?) %>
  
  <% if images.nil? %>
    <%= product_image(@product, :itemprop => "image") %>
  <% else %>
    <%= link_to product_image(@product, :itemprop => "image"), images.first.attachment.url(Spree::ProductZoom::Config.default_image_style), :class => 'fancybox' %>
  <% end %>
<% end %>
